<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>API Assignment</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f2f2f2; margin: 0; padding: 20px; }
    button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
    .card { background: #fff; padding: 15px; margin-top: 20px; border-radius: 8px; }
    img { max-width: 150px; border-radius: 8px; }
    .news img { max-width: 200px; }
  </style>
</head>
<body>

  <h1>Random User Information</h1>
  <button onclick="loadData()">Get Random User</button>

  <div id="content"></div>

  <script>
    async function loadData() {
      const res = await fetch("/api/data");
      const data = await res.json();

      const user = data.user;
      const country = data.country;
      const rates = data.rates;
      const news = data.news;

      document.getElementById("content").innerHTML = `
        <div class="card">
          <h2>User</h2>
          <img src="${user.photo}" />
          <p><b>Name:</b> ${user.firstName} ${user.lastName}</p>
          <p><b>Gender:</b> ${user.gender}</p>
          <p><b>Age:</b> ${user.age}</p>
          <p><b>Date of Birth:</b> ${user.dob}</p>
          <p><b>City:</b> ${user.city}</p>
          <p><b>Country:</b> ${user.country}</p>
          <p><b>Address:</b> ${user.address}</p>
        </div>

        <div class="card">
          <h2>Country Info</h2>
          <img src="${country.flag}" />
          <p><b>Name:</b> ${country.name}</p>
          <p><b>Capital:</b> ${country.capital}</p>
          <p><b>Languages:</b> ${country.languages}</p>
          <p><b>Currency:</b> ${country.currency} (${country.currencyCode})</p>
          <p><b>Exchange Rates:</b></p>
          <p>1 ${country.currencyCode} = ${rates.usd} USD</p>
          <p>1 ${country.currencyCode} = ${rates.kzt} KZT</p>
        </div>

        <div class="card news">
          <h2>News</h2>
          ${news.map(n => `
            <div class="card">
              <h4>${n.title}</h4>
              ${n.image ? <img src="${n.image}" /> : ""}
              <p>${n.description || ""}</p>
              <a href="${n.url}" target="_blank">Read more</a>
            </div>
          `).join("")}
        </div>
      `;
    }
  </script>

</body>
</html>